'use strict';

require("source-map-support/register");

const eslint = require('gulp-eslint');

const debug = require('gulp-debug');

const gulpIf = require('gulp-if');

const {
  isVerbose
} = require('../utils');

const yamlLint = require('../yaml-lint');

const configure = function configure(gulp, opts) {
  const verbose = isVerbose();
  gulp.task('eslint', function eslintTask() {
    let opts = {
      fix: process.argv.includes('--fix')
    };

    if (process.argv.includes('--lax-lint') || process.argv.includes('-ll')) {
      opts.rules = {
        'no-console': 0,
        'mocha/no-exclusive-tests': 0
      };
    }

    return gulp.src(['**/*.js', '!node_modules/**', '!**/node_modules/**', '!build/**', '!**/*.min.js']).pipe(gulpIf(verbose, debug())).pipe(eslint(opts)).pipe(eslint.format()).pipe(eslint.failAfterError()).pipe(gulpIf(file => file.eslint && file.eslint.fixed, gulp.dest(process.cwd())));
  });
  gulp.task('yamllint', function yamllintTask() {
    const yamlOpts = {
      safe: !!opts.yaml.safe
    };
    return gulp.src(opts.yaml.files).pipe(gulpIf(verbose, debug())).pipe(yamlLint(yamlOpts));
  });
  const lintTasks = [];

  if (opts.eslint) {
    lintTasks.push('eslint');
  }

  if (opts.yamllint) {
    lintTasks.push('yamllint');
  }

  if (lintTasks.length) {
    gulp.task('lint', gulp.series(lintTasks));
  }
};

module.exports = {
  configure
};require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3Rhc2tzL2xpbnQuanMiLCJuYW1lcyI6WyJlc2xpbnQiLCJyZXF1aXJlIiwiZGVidWciLCJndWxwSWYiLCJpc1ZlcmJvc2UiLCJ5YW1sTGludCIsImNvbmZpZ3VyZSIsImd1bHAiLCJvcHRzIiwidmVyYm9zZSIsInRhc2siLCJlc2xpbnRUYXNrIiwiZml4IiwicHJvY2VzcyIsImFyZ3YiLCJpbmNsdWRlcyIsInJ1bGVzIiwic3JjIiwicGlwZSIsImZvcm1hdCIsImZhaWxBZnRlckVycm9yIiwiZmlsZSIsImZpeGVkIiwiZGVzdCIsImN3ZCIsInlhbWxsaW50VGFzayIsInlhbWxPcHRzIiwic2FmZSIsInlhbWwiLCJmaWxlcyIsImxpbnRUYXNrcyIsInB1c2giLCJ5YW1sbGludCIsImxlbmd0aCIsInNlcmllcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uIiwic291cmNlcyI6WyJsaWIvdGFza3MvbGludC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGVzbGludCA9IHJlcXVpcmUoJ2d1bHAtZXNsaW50Jyk7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ2d1bHAtZGVidWcnKTtcbmNvbnN0IGd1bHBJZiA9IHJlcXVpcmUoJ2d1bHAtaWYnKTtcbmNvbnN0IHtpc1ZlcmJvc2V9ID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcbmNvbnN0IHlhbWxMaW50ID0gcmVxdWlyZSgnLi4veWFtbC1saW50Jyk7XG5cbmNvbnN0IGNvbmZpZ3VyZSA9IGZ1bmN0aW9uIGNvbmZpZ3VyZShndWxwLCBvcHRzKSB7XG4gIGNvbnN0IHZlcmJvc2UgPSBpc1ZlcmJvc2UoKTtcblxuICBndWxwLnRhc2soJ2VzbGludCcsIGZ1bmN0aW9uIGVzbGludFRhc2soKSB7XG4gICAgbGV0IG9wdHMgPSB7XG4gICAgICBmaXg6IHByb2Nlc3MuYXJndi5pbmNsdWRlcygnLS1maXgnKSxcbiAgICB9O1xuICAgIGlmIChwcm9jZXNzLmFyZ3YuaW5jbHVkZXMoJy0tbGF4LWxpbnQnKSB8fCBwcm9jZXNzLmFyZ3YuaW5jbHVkZXMoJy1sbCcpKSB7XG4gICAgICAvLyB3aGVuIHJ1bm5pbmcgdGVzdHMsIHdlIHdhbnQgdG8gYmUgYWJsZSB0byB1c2UgZXhjbHVzaXZlIHRlc3RzXG4gICAgICAvLyBhbmQgY29uc29sZSBsb2dnaW5nXG4gICAgICBvcHRzLnJ1bGVzID0ge1xuICAgICAgICAnbm8tY29uc29sZSc6IDAsXG4gICAgICAgICdtb2NoYS9uby1leGNsdXNpdmUtdGVzdHMnOiAwLFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGd1bHBcbiAgICAgIC5zcmMoWycqKi8qLmpzJywgJyFub2RlX21vZHVsZXMvKionLCAnISoqL25vZGVfbW9kdWxlcy8qKicsICchYnVpbGQvKionLCAnISoqLyoubWluLmpzJ10pXG4gICAgICAucGlwZShndWxwSWYodmVyYm9zZSwgZGVidWcoKSkpXG4gICAgICAucGlwZShlc2xpbnQob3B0cykpXG4gICAgICAucGlwZShlc2xpbnQuZm9ybWF0KCkpXG4gICAgICAucGlwZShlc2xpbnQuZmFpbEFmdGVyRXJyb3IoKSlcbiAgICAgIC5waXBlKGd1bHBJZigoZmlsZSkgPT4gZmlsZS5lc2xpbnQgJiYgZmlsZS5lc2xpbnQuZml4ZWQsIGd1bHAuZGVzdChwcm9jZXNzLmN3ZCgpKSkpO1xuICB9KTtcblxuICBndWxwLnRhc2soJ3lhbWxsaW50JywgZnVuY3Rpb24geWFtbGxpbnRUYXNrKCkge1xuICAgIGNvbnN0IHlhbWxPcHRzID0ge1xuICAgICAgc2FmZTogISFvcHRzLnlhbWwuc2FmZSxcbiAgICB9O1xuICAgIHJldHVybiBndWxwLnNyYyhvcHRzLnlhbWwuZmlsZXMpLnBpcGUoZ3VscElmKHZlcmJvc2UsIGRlYnVnKCkpKS5waXBlKHlhbWxMaW50KHlhbWxPcHRzKSk7XG4gIH0pO1xuXG4gIGNvbnN0IGxpbnRUYXNrcyA9IFtdO1xuICBpZiAob3B0cy5lc2xpbnQpIHtcbiAgICBsaW50VGFza3MucHVzaCgnZXNsaW50Jyk7XG4gIH1cbiAgaWYgKG9wdHMueWFtbGxpbnQpIHtcbiAgICBsaW50VGFza3MucHVzaCgneWFtbGxpbnQnKTtcbiAgfVxuICBpZiAobGludFRhc2tzLmxlbmd0aCkge1xuICAgIGd1bHAudGFzaygnbGludCcsIGd1bHAuc2VyaWVzKGxpbnRUYXNrcykpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY29uZmlndXJlLFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQXRCOztBQUNBLE1BQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLFlBQUQsQ0FBckI7O0FBQ0EsTUFBTUUsTUFBTSxHQUFHRixPQUFPLENBQUMsU0FBRCxDQUF0Qjs7QUFDQSxNQUFNO0VBQUNHO0FBQUQsSUFBY0gsT0FBTyxDQUFDLFVBQUQsQ0FBM0I7O0FBQ0EsTUFBTUksUUFBUSxHQUFHSixPQUFPLENBQUMsY0FBRCxDQUF4Qjs7QUFFQSxNQUFNSyxTQUFTLEdBQUcsU0FBU0EsU0FBVCxDQUFtQkMsSUFBbkIsRUFBeUJDLElBQXpCLEVBQStCO0VBQy9DLE1BQU1DLE9BQU8sR0FBR0wsU0FBUyxFQUF6QjtFQUVBRyxJQUFJLENBQUNHLElBQUwsQ0FBVSxRQUFWLEVBQW9CLFNBQVNDLFVBQVQsR0FBc0I7SUFDeEMsSUFBSUgsSUFBSSxHQUFHO01BQ1RJLEdBQUcsRUFBRUMsT0FBTyxDQUFDQyxJQUFSLENBQWFDLFFBQWIsQ0FBc0IsT0FBdEI7SUFESSxDQUFYOztJQUdBLElBQUlGLE9BQU8sQ0FBQ0MsSUFBUixDQUFhQyxRQUFiLENBQXNCLFlBQXRCLEtBQXVDRixPQUFPLENBQUNDLElBQVIsQ0FBYUMsUUFBYixDQUFzQixLQUF0QixDQUEzQyxFQUF5RTtNQUd2RVAsSUFBSSxDQUFDUSxLQUFMLEdBQWE7UUFDWCxjQUFjLENBREg7UUFFWCw0QkFBNEI7TUFGakIsQ0FBYjtJQUlEOztJQUNELE9BQU9ULElBQUksQ0FDUlUsR0FESSxDQUNBLENBQUMsU0FBRCxFQUFZLGtCQUFaLEVBQWdDLHFCQUFoQyxFQUF1RCxXQUF2RCxFQUFvRSxjQUFwRSxDQURBLEVBRUpDLElBRkksQ0FFQ2YsTUFBTSxDQUFDTSxPQUFELEVBQVVQLEtBQUssRUFBZixDQUZQLEVBR0pnQixJQUhJLENBR0NsQixNQUFNLENBQUNRLElBQUQsQ0FIUCxFQUlKVSxJQUpJLENBSUNsQixNQUFNLENBQUNtQixNQUFQLEVBSkQsRUFLSkQsSUFMSSxDQUtDbEIsTUFBTSxDQUFDb0IsY0FBUCxFQUxELEVBTUpGLElBTkksQ0FNQ2YsTUFBTSxDQUFFa0IsSUFBRCxJQUFVQSxJQUFJLENBQUNyQixNQUFMLElBQWVxQixJQUFJLENBQUNyQixNQUFMLENBQVlzQixLQUF0QyxFQUE2Q2YsSUFBSSxDQUFDZ0IsSUFBTCxDQUFVVixPQUFPLENBQUNXLEdBQVIsRUFBVixDQUE3QyxDQU5QLENBQVA7RUFPRCxDQW5CRDtFQXFCQWpCLElBQUksQ0FBQ0csSUFBTCxDQUFVLFVBQVYsRUFBc0IsU0FBU2UsWUFBVCxHQUF3QjtJQUM1QyxNQUFNQyxRQUFRLEdBQUc7TUFDZkMsSUFBSSxFQUFFLENBQUMsQ0FBQ25CLElBQUksQ0FBQ29CLElBQUwsQ0FBVUQ7SUFESCxDQUFqQjtJQUdBLE9BQU9wQixJQUFJLENBQUNVLEdBQUwsQ0FBU1QsSUFBSSxDQUFDb0IsSUFBTCxDQUFVQyxLQUFuQixFQUEwQlgsSUFBMUIsQ0FBK0JmLE1BQU0sQ0FBQ00sT0FBRCxFQUFVUCxLQUFLLEVBQWYsQ0FBckMsRUFBeURnQixJQUF6RCxDQUE4RGIsUUFBUSxDQUFDcUIsUUFBRCxDQUF0RSxDQUFQO0VBQ0QsQ0FMRDtFQU9BLE1BQU1JLFNBQVMsR0FBRyxFQUFsQjs7RUFDQSxJQUFJdEIsSUFBSSxDQUFDUixNQUFULEVBQWlCO0lBQ2Y4QixTQUFTLENBQUNDLElBQVYsQ0FBZSxRQUFmO0VBQ0Q7O0VBQ0QsSUFBSXZCLElBQUksQ0FBQ3dCLFFBQVQsRUFBbUI7SUFDakJGLFNBQVMsQ0FBQ0MsSUFBVixDQUFlLFVBQWY7RUFDRDs7RUFDRCxJQUFJRCxTQUFTLENBQUNHLE1BQWQsRUFBc0I7SUFDcEIxQixJQUFJLENBQUNHLElBQUwsQ0FBVSxNQUFWLEVBQWtCSCxJQUFJLENBQUMyQixNQUFMLENBQVlKLFNBQVosQ0FBbEI7RUFDRDtBQUNGLENBekNEOztBQTJDQUssTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0VBQ2Y5QjtBQURlLENBQWpCIn0=
