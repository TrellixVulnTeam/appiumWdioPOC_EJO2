'use strict';

require("source-map-support/register");

const fs = require('fs');

const path = require('path');

const log = require('fancy-log');

const {
  sync: findRoot
} = require('pkg-dir');

const axios = require('axios');

const B = require('bluebird');

const os = require('os');

const {
  Octokit
} = require('@octokit/rest');

const _ = require('lodash');

const FormData = require('form-data');

const readFile = B.promisify(fs.readFile, {
  context: fs
});
const writeFile = B.promisify(fs.writeFile, {
  context: fs
});
const ASSET_NAME_REGEXP = /^appium-\S+.zip$/;
const GITHUB_OWNER = 'appium';
const GITHUB_REPO = 'appium-build-store';
const OUTPUT_INTERVAL = 60000;
const MOCHA_PARALLEL_TEST_BROKEN_LINE = `if (value.type === 'test') {`;
const MOCHA_PARALLEL_TEST_FIXED_LINE = `if (value.type === 'test') {\n        delete value.fn;`;

const configure = function configure(gulp, opts) {
  const owner = opts.ci.owner || GITHUB_OWNER;
  const repo = opts.ci.repo || GITHUB_REPO;
  const root = opts.projectRoot ? opts.projectRoot : findRoot(__dirname);
  gulp.task('fix-mocha-parallel-tests', async function fixMochaParallelTests() {
    log(`Updating 'mocha-parallel-tests'`);
    const filePath = path.resolve(root, 'node_modules', 'mocha-parallel-tests', 'dist', 'main', 'util.js');
    log(`File: '${filePath}'`);

    try {
      let script = await readFile(filePath, {
        encoding: 'utf8'
      });
      script = await script.replace(MOCHA_PARALLEL_TEST_BROKEN_LINE, MOCHA_PARALLEL_TEST_FIXED_LINE);
      await writeFile(filePath, script);
    } catch (err) {
      const msg = err.message.includes('ENOENT') ? `File '${filePath}' does not exist` : err.message;
      log.error(`Unable to fix: ${msg}`);
    }
  });
  gulp.task('github:upload', async function githubUpload() {
    const githubToken = process.env.GITHUB_TOKEN;

    if (_.isEmpty(githubToken)) {
      log.warn('No GitHub token found in GITHUB_TOKEN environment variable');
      return;
    }

    const octokit = new Octokit({
      auth: githubToken
    });
    const buildName = process.env.BUILD_NAME || `${Date.now()}`;
    const commitMessage = process.env.COMMIT_MESSAGE || 'No commit message provided';
    const releaseTag = `appium-build-${buildName}`;
    const releaseFile = `appium-${buildName}.zip`;
    let releaseId;

    try {
      log(`Creating release on '${owner}/${repo}'`);
      const res = await octokit.repos.createRelease({
        owner,
        repo,
        tag_name: releaseTag,
        name: `Appium build ${buildName}`,
        body: `Appium build for commit ${buildName}\n'${commitMessage}'`
      });
      releaseId = res.data.id;
      log(`Created release '${releaseTag}' (id: ${releaseId})`);
      const url = res.data.upload_url;
      const file = path.resolve(root, 'appium.zip');
      log(`Uploading file '${file}'`);
      await octokit.repos.uploadReleaseAsset({
        headers: {
          'content-length': fs.statSync(file).size,
          'content-type': 'application/zip'
        },
        url,
        file: fs.createReadStream(file),
        name: releaseFile
      });
      log(`Uploaded release file '${releaseFile}'`);
    } catch (err) {
      log.error(`Error uploading release asset: ${err.message}`);

      if (err.errors) {
        log.error(JSON.stringify(err.errors, 2));
      }

      if (releaseId) {
        log('Deleting release with no asset');
        await octokit.repos.deleteRelease({
          owner,
          repo,
          release_id: releaseId
        });
        log('Release deleted');
      }

      throw new Error(`Error uploading release: ${err.message}`);
    }
  });
  gulp.task('github-upload', gulp.series(['github:upload']));
  gulp.task('github:download', async function githubDownload() {
    const githubToken = process.env.GITHUB_TOKEN;

    if (_.isEmpty(githubToken)) {
      log.warn('No GitHub token found in GITHUB_TOKEN environment variable');
      return;
    }

    const octokit = new Octokit({
      auth: githubToken
    });
    log.info('Downloading GitHub asset');
    const tempDir = os.tmpdir();
    log.info(`Temporary directory for download: '${tempDir}'`);
    log.info(`Downloading repository: '${owner}/${repo}'`);
    const res = await octokit.repos.getLatestRelease({
      owner,
      repo
    });

    for (const asset of res.data.assets) {
      if (ASSET_NAME_REGEXP.test(asset.name)) {
        log.info(`Downloading asset from '${asset.browser_download_url}'`);
        const url = asset.browser_download_url;
        const writer = fs.createWriteStream(`${tempDir}/appium.zip`);
        const responseStream = (await axios({
          url,
          responseType: 'stream'
        })).data;
        responseStream.pipe(writer);
        return await new B((resolve, reject) => {
          responseStream.once('error', reject);
          writer.once('finish', resolve);
          writer.once('error', e => {
            responseStream.unpipe(writer);
            reject(e);
          });
        });
      }
    }

    throw new Error(`Unable to find Appium build asset`);
  });
  gulp.task('saucelabs:upload', async function sauceLabsUpload() {
    log.info('Uploading to Sauce Storage');
    const tempDir = os.tmpdir();
    log.info(`Temporary directory for upload: '${tempDir}'`);
    const form = new FormData();
    form.append('file', fs.createReadStream(`${tempDir}/appium.zip`));
    const options = {
      method: 'POST',
      url: `https://saucelabs.com/rest/v1/storage/${process.env.SAUCE_USERNAME}/appium.zip?overwrite=true`,
      headers: form.getHeaders(),
      auth: {
        username: process.env.SAUCE_USERNAME,
        password: process.env.SAUCE_ACCESS_KEY
      },
      data: form
    };
    const body = (await axios(options)).data;
    body.username = '*'.repeat((body.username || '').length);
    log.info(`File uploaded: ${JSON.stringify(body)}`);
  });
  gulp.task('sauce-storage-upload', gulp.series(['github:download', 'saucelabs:upload']));
  gulp.task('periodic-output', function periodicOutput() {
    const interval = opts.ci.interval || OUTPUT_INTERVAL;
    return new B(function writeToStdout() {
      setInterval(function print() {
        process.stdout.write('.');
      }, interval);
    });
  });
};

module.exports = {
  configure
};require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGliL3Rhc2tzL2NpLmpzIiwibmFtZXMiOlsiZnMiLCJyZXF1aXJlIiwicGF0aCIsImxvZyIsInN5bmMiLCJmaW5kUm9vdCIsImF4aW9zIiwiQiIsIm9zIiwiT2N0b2tpdCIsIl8iLCJGb3JtRGF0YSIsInJlYWRGaWxlIiwicHJvbWlzaWZ5IiwiY29udGV4dCIsIndyaXRlRmlsZSIsIkFTU0VUX05BTUVfUkVHRVhQIiwiR0lUSFVCX09XTkVSIiwiR0lUSFVCX1JFUE8iLCJPVVRQVVRfSU5URVJWQUwiLCJNT0NIQV9QQVJBTExFTF9URVNUX0JST0tFTl9MSU5FIiwiTU9DSEFfUEFSQUxMRUxfVEVTVF9GSVhFRF9MSU5FIiwiY29uZmlndXJlIiwiZ3VscCIsIm9wdHMiLCJvd25lciIsImNpIiwicmVwbyIsInJvb3QiLCJwcm9qZWN0Um9vdCIsIl9fZGlybmFtZSIsInRhc2siLCJmaXhNb2NoYVBhcmFsbGVsVGVzdHMiLCJmaWxlUGF0aCIsInJlc29sdmUiLCJzY3JpcHQiLCJlbmNvZGluZyIsInJlcGxhY2UiLCJlcnIiLCJtc2ciLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJlcnJvciIsImdpdGh1YlVwbG9hZCIsImdpdGh1YlRva2VuIiwicHJvY2VzcyIsImVudiIsIkdJVEhVQl9UT0tFTiIsImlzRW1wdHkiLCJ3YXJuIiwib2N0b2tpdCIsImF1dGgiLCJidWlsZE5hbWUiLCJCVUlMRF9OQU1FIiwiRGF0ZSIsIm5vdyIsImNvbW1pdE1lc3NhZ2UiLCJDT01NSVRfTUVTU0FHRSIsInJlbGVhc2VUYWciLCJyZWxlYXNlRmlsZSIsInJlbGVhc2VJZCIsInJlcyIsInJlcG9zIiwiY3JlYXRlUmVsZWFzZSIsInRhZ19uYW1lIiwibmFtZSIsImJvZHkiLCJkYXRhIiwiaWQiLCJ1cmwiLCJ1cGxvYWRfdXJsIiwiZmlsZSIsInVwbG9hZFJlbGVhc2VBc3NldCIsImhlYWRlcnMiLCJzdGF0U3luYyIsInNpemUiLCJjcmVhdGVSZWFkU3RyZWFtIiwiZXJyb3JzIiwiSlNPTiIsInN0cmluZ2lmeSIsImRlbGV0ZVJlbGVhc2UiLCJyZWxlYXNlX2lkIiwiRXJyb3IiLCJzZXJpZXMiLCJnaXRodWJEb3dubG9hZCIsImluZm8iLCJ0ZW1wRGlyIiwidG1wZGlyIiwiZ2V0TGF0ZXN0UmVsZWFzZSIsImFzc2V0IiwiYXNzZXRzIiwidGVzdCIsImJyb3dzZXJfZG93bmxvYWRfdXJsIiwid3JpdGVyIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJyZXNwb25zZVN0cmVhbSIsInJlc3BvbnNlVHlwZSIsInBpcGUiLCJyZWplY3QiLCJvbmNlIiwiZSIsInVucGlwZSIsInNhdWNlTGFic1VwbG9hZCIsImZvcm0iLCJhcHBlbmQiLCJvcHRpb25zIiwibWV0aG9kIiwiU0FVQ0VfVVNFUk5BTUUiLCJnZXRIZWFkZXJzIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIlNBVUNFX0FDQ0VTU19LRVkiLCJyZXBlYXQiLCJsZW5ndGgiLCJwZXJpb2RpY091dHB1dCIsImludGVydmFsIiwid3JpdGVUb1N0ZG91dCIsInNldEludGVydmFsIiwicHJpbnQiLCJzdGRvdXQiLCJ3cml0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii4uLy4uLy4uIiwic291cmNlcyI6WyJsaWIvdGFza3MvY2kuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgbG9nID0gcmVxdWlyZSgnZmFuY3ktbG9nJyk7XG5jb25zdCB7c3luYzogZmluZFJvb3R9ID0gcmVxdWlyZSgncGtnLWRpcicpO1xuY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpO1xuY29uc3QgQiA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJyk7XG5jb25zdCB7T2N0b2tpdH0gPSByZXF1aXJlKCdAb2N0b2tpdC9yZXN0Jyk7XG5jb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5jb25zdCBGb3JtRGF0YSA9IHJlcXVpcmUoJ2Zvcm0tZGF0YScpO1xuXG5jb25zdCByZWFkRmlsZSA9IEIucHJvbWlzaWZ5KGZzLnJlYWRGaWxlLCB7Y29udGV4dDogZnN9KTtcbmNvbnN0IHdyaXRlRmlsZSA9IEIucHJvbWlzaWZ5KGZzLndyaXRlRmlsZSwge2NvbnRleHQ6IGZzfSk7XG5cbmNvbnN0IEFTU0VUX05BTUVfUkVHRVhQID0gL15hcHBpdW0tXFxTKy56aXAkLztcblxuY29uc3QgR0lUSFVCX09XTkVSID0gJ2FwcGl1bSc7XG5jb25zdCBHSVRIVUJfUkVQTyA9ICdhcHBpdW0tYnVpbGQtc3RvcmUnO1xuXG5jb25zdCBPVVRQVVRfSU5URVJWQUwgPSA2MDAwMDtcblxuY29uc3QgTU9DSEFfUEFSQUxMRUxfVEVTVF9CUk9LRU5fTElORSA9IGBpZiAodmFsdWUudHlwZSA9PT0gJ3Rlc3QnKSB7YDtcbmNvbnN0IE1PQ0hBX1BBUkFMTEVMX1RFU1RfRklYRURfTElORSA9IGBpZiAodmFsdWUudHlwZSA9PT0gJ3Rlc3QnKSB7XFxuICAgICAgICBkZWxldGUgdmFsdWUuZm47YDtcblxuY29uc3QgY29uZmlndXJlID0gZnVuY3Rpb24gY29uZmlndXJlKGd1bHAsIG9wdHMpIHtcbiAgY29uc3Qgb3duZXIgPSBvcHRzLmNpLm93bmVyIHx8IEdJVEhVQl9PV05FUjtcbiAgY29uc3QgcmVwbyA9IG9wdHMuY2kucmVwbyB8fCBHSVRIVUJfUkVQTztcblxuICBjb25zdCByb290ID0gb3B0cy5wcm9qZWN0Um9vdCA/IG9wdHMucHJvamVjdFJvb3QgOiBmaW5kUm9vdChfX2Rpcm5hbWUpO1xuXG4gIC8qKlxuICAgKiBgbW9jaGEtcGFyYWxsZWwtdGVzdHNgIGlzIGJyb2tlbiBhdCB0aGUgbW9tZW50LCBzbyBza2lwcGVkIGRlc2NyaWJlIGJsb2NrcyBmYWlsXG4gICAqIHRoZSBmaXggaXMgc2ltcGxlLCBhbmQgdGhpcyBwYXRjaGVzIHRoZSBlcnJvciB1bnRpbCB0aGV5IGZpeCB0aGUgcGFja2FnZVxuICAgKiovXG4gIGd1bHAudGFzaygnZml4LW1vY2hhLXBhcmFsbGVsLXRlc3RzJywgYXN5bmMgZnVuY3Rpb24gZml4TW9jaGFQYXJhbGxlbFRlc3RzKCkge1xuICAgIGxvZyhgVXBkYXRpbmcgJ21vY2hhLXBhcmFsbGVsLXRlc3RzJ2ApO1xuICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKFxuICAgICAgcm9vdCxcbiAgICAgICdub2RlX21vZHVsZXMnLFxuICAgICAgJ21vY2hhLXBhcmFsbGVsLXRlc3RzJyxcbiAgICAgICdkaXN0JyxcbiAgICAgICdtYWluJyxcbiAgICAgICd1dGlsLmpzJ1xuICAgICk7XG5cbiAgICBsb2coYEZpbGU6ICcke2ZpbGVQYXRofSdgKTtcblxuICAgIHRyeSB7XG4gICAgICBsZXQgc2NyaXB0ID0gYXdhaXQgcmVhZEZpbGUoZmlsZVBhdGgsIHtlbmNvZGluZzogJ3V0ZjgnfSk7XG4gICAgICBzY3JpcHQgPSBhd2FpdCBzY3JpcHQucmVwbGFjZShcbiAgICAgICAgTU9DSEFfUEFSQUxMRUxfVEVTVF9CUk9LRU5fTElORSxcbiAgICAgICAgTU9DSEFfUEFSQUxMRUxfVEVTVF9GSVhFRF9MSU5FXG4gICAgICApO1xuICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBzY3JpcHQpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3QgbXNnID0gZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ0VOT0VOVCcpXG4gICAgICAgID8gYEZpbGUgJyR7ZmlsZVBhdGh9JyBkb2VzIG5vdCBleGlzdGBcbiAgICAgICAgOiBlcnIubWVzc2FnZTtcbiAgICAgIGxvZy5lcnJvcihgVW5hYmxlIHRvIGZpeDogJHttc2d9YCk7XG4gICAgfVxuICB9KTtcblxuICBndWxwLnRhc2soJ2dpdGh1Yjp1cGxvYWQnLCBhc3luYyBmdW5jdGlvbiBnaXRodWJVcGxvYWQoKSB7XG4gICAgY29uc3QgZ2l0aHViVG9rZW4gPSBwcm9jZXNzLmVudi5HSVRIVUJfVE9LRU47XG4gICAgaWYgKF8uaXNFbXB0eShnaXRodWJUb2tlbikpIHtcbiAgICAgIGxvZy53YXJuKCdObyBHaXRIdWIgdG9rZW4gZm91bmQgaW4gR0lUSFVCX1RPS0VOIGVudmlyb25tZW50IHZhcmlhYmxlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9jdG9raXQgPSBuZXcgT2N0b2tpdCh7YXV0aDogZ2l0aHViVG9rZW59KTtcblxuICAgIGNvbnN0IGJ1aWxkTmFtZSA9IHByb2Nlc3MuZW52LkJVSUxEX05BTUUgfHwgYCR7RGF0ZS5ub3coKX1gO1xuICAgIGNvbnN0IGNvbW1pdE1lc3NhZ2UgPSBwcm9jZXNzLmVudi5DT01NSVRfTUVTU0FHRSB8fCAnTm8gY29tbWl0IG1lc3NhZ2UgcHJvdmlkZWQnO1xuXG4gICAgY29uc3QgcmVsZWFzZVRhZyA9IGBhcHBpdW0tYnVpbGQtJHtidWlsZE5hbWV9YDtcbiAgICBjb25zdCByZWxlYXNlRmlsZSA9IGBhcHBpdW0tJHtidWlsZE5hbWV9LnppcGA7XG5cbiAgICBsZXQgcmVsZWFzZUlkO1xuICAgIHRyeSB7XG4gICAgICBsb2coYENyZWF0aW5nIHJlbGVhc2Ugb24gJyR7b3duZXJ9LyR7cmVwb30nYCk7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBvY3Rva2l0LnJlcG9zLmNyZWF0ZVJlbGVhc2Uoe1xuICAgICAgICBvd25lcixcbiAgICAgICAgcmVwbyxcbiAgICAgICAgdGFnX25hbWU6IHJlbGVhc2VUYWcsXG4gICAgICAgIG5hbWU6IGBBcHBpdW0gYnVpbGQgJHtidWlsZE5hbWV9YCxcbiAgICAgICAgYm9keTogYEFwcGl1bSBidWlsZCBmb3IgY29tbWl0ICR7YnVpbGROYW1lfVxcbicke2NvbW1pdE1lc3NhZ2V9J2AsXG4gICAgICB9KTtcblxuICAgICAgcmVsZWFzZUlkID0gcmVzLmRhdGEuaWQ7XG4gICAgICBsb2coYENyZWF0ZWQgcmVsZWFzZSAnJHtyZWxlYXNlVGFnfScgKGlkOiAke3JlbGVhc2VJZH0pYCk7XG5cbiAgICAgIGNvbnN0IHVybCA9IHJlcy5kYXRhLnVwbG9hZF91cmw7XG4gICAgICBjb25zdCBmaWxlID0gcGF0aC5yZXNvbHZlKHJvb3QsICdhcHBpdW0uemlwJyk7XG4gICAgICBsb2coYFVwbG9hZGluZyBmaWxlICcke2ZpbGV9J2ApO1xuICAgICAgYXdhaXQgb2N0b2tpdC5yZXBvcy51cGxvYWRSZWxlYXNlQXNzZXQoe1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ2NvbnRlbnQtbGVuZ3RoJzogZnMuc3RhdFN5bmMoZmlsZSkuc2l6ZSxcbiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3ppcCcsXG4gICAgICAgIH0sXG4gICAgICAgIHVybCxcbiAgICAgICAgZmlsZTogZnMuY3JlYXRlUmVhZFN0cmVhbShmaWxlKSxcbiAgICAgICAgbmFtZTogcmVsZWFzZUZpbGUsXG4gICAgICB9KTtcbiAgICAgIGxvZyhgVXBsb2FkZWQgcmVsZWFzZSBmaWxlICcke3JlbGVhc2VGaWxlfSdgKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZy5lcnJvcihgRXJyb3IgdXBsb2FkaW5nIHJlbGVhc2UgYXNzZXQ6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICBpZiAoZXJyLmVycm9ycykge1xuICAgICAgICBsb2cuZXJyb3IoSlNPTi5zdHJpbmdpZnkoZXJyLmVycm9ycywgMikpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVsZWFzZUlkKSB7XG4gICAgICAgIGxvZygnRGVsZXRpbmcgcmVsZWFzZSB3aXRoIG5vIGFzc2V0Jyk7XG4gICAgICAgIGF3YWl0IG9jdG9raXQucmVwb3MuZGVsZXRlUmVsZWFzZSh7XG4gICAgICAgICAgb3duZXIsXG4gICAgICAgICAgcmVwbyxcbiAgICAgICAgICByZWxlYXNlX2lkOiByZWxlYXNlSWQsXG4gICAgICAgIH0pO1xuICAgICAgICBsb2coJ1JlbGVhc2UgZGVsZXRlZCcpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciB1cGxvYWRpbmcgcmVsZWFzZTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICB9XG4gIH0pO1xuXG4gIGd1bHAudGFzaygnZ2l0aHViLXVwbG9hZCcsIGd1bHAuc2VyaWVzKFsnZ2l0aHViOnVwbG9hZCddKSk7XG5cbiAgZ3VscC50YXNrKCdnaXRodWI6ZG93bmxvYWQnLCBhc3luYyBmdW5jdGlvbiBnaXRodWJEb3dubG9hZCgpIHtcbiAgICBjb25zdCBnaXRodWJUb2tlbiA9IHByb2Nlc3MuZW52LkdJVEhVQl9UT0tFTjtcbiAgICBpZiAoXy5pc0VtcHR5KGdpdGh1YlRva2VuKSkge1xuICAgICAgbG9nLndhcm4oJ05vIEdpdEh1YiB0b2tlbiBmb3VuZCBpbiBHSVRIVUJfVE9LRU4gZW52aXJvbm1lbnQgdmFyaWFibGUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb2N0b2tpdCA9IG5ldyBPY3Rva2l0KHthdXRoOiBnaXRodWJUb2tlbn0pO1xuXG4gICAgbG9nLmluZm8oJ0Rvd25sb2FkaW5nIEdpdEh1YiBhc3NldCcpO1xuICAgIGNvbnN0IHRlbXBEaXIgPSBvcy50bXBkaXIoKTtcbiAgICBsb2cuaW5mbyhgVGVtcG9yYXJ5IGRpcmVjdG9yeSBmb3IgZG93bmxvYWQ6ICcke3RlbXBEaXJ9J2ApO1xuXG4gICAgbG9nLmluZm8oYERvd25sb2FkaW5nIHJlcG9zaXRvcnk6ICcke293bmVyfS8ke3JlcG99J2ApO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IG9jdG9raXQucmVwb3MuZ2V0TGF0ZXN0UmVsZWFzZSh7b3duZXIsIHJlcG99KTtcbiAgICAvLyBnbyB0aHJvdWdoIHRoZSBhc3NldHMgYW5kIGZpbmQgdGhlIGNvcnJlY3Qgb25lXG4gICAgZm9yIChjb25zdCBhc3NldCBvZiByZXMuZGF0YS5hc3NldHMpIHtcbiAgICAgIGlmIChBU1NFVF9OQU1FX1JFR0VYUC50ZXN0KGFzc2V0Lm5hbWUpKSB7XG4gICAgICAgIGxvZy5pbmZvKGBEb3dubG9hZGluZyBhc3NldCBmcm9tICcke2Fzc2V0LmJyb3dzZXJfZG93bmxvYWRfdXJsfSdgKTtcbiAgICAgICAgY29uc3QgdXJsID0gYXNzZXQuYnJvd3Nlcl9kb3dubG9hZF91cmw7XG4gICAgICAgIGNvbnN0IHdyaXRlciA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKGAke3RlbXBEaXJ9L2FwcGl1bS56aXBgKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VTdHJlYW0gPSAoXG4gICAgICAgICAgYXdhaXQgYXhpb3Moe1xuICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnc3RyZWFtJyxcbiAgICAgICAgICB9KVxuICAgICAgICApLmRhdGE7XG4gICAgICAgIHJlc3BvbnNlU3RyZWFtLnBpcGUod3JpdGVyKTtcblxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIHJlc3BvbnNlU3RyZWFtLm9uY2UoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgICAgICB3cml0ZXIub25jZSgnZmluaXNoJywgcmVzb2x2ZSk7XG4gICAgICAgICAgd3JpdGVyLm9uY2UoJ2Vycm9yJywgKGUpID0+IHtcbiAgICAgICAgICAgIHJlc3BvbnNlU3RyZWFtLnVucGlwZSh3cml0ZXIpO1xuICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gZmluZCBBcHBpdW0gYnVpbGQgYXNzZXRgKTtcbiAgfSk7XG5cbiAgZ3VscC50YXNrKCdzYXVjZWxhYnM6dXBsb2FkJywgYXN5bmMgZnVuY3Rpb24gc2F1Y2VMYWJzVXBsb2FkKCkge1xuICAgIC8vIEZpbmQgdGhlIGxhdGVzdCBidW5kbGVcbiAgICBsb2cuaW5mbygnVXBsb2FkaW5nIHRvIFNhdWNlIFN0b3JhZ2UnKTtcbiAgICBjb25zdCB0ZW1wRGlyID0gb3MudG1wZGlyKCk7XG4gICAgbG9nLmluZm8oYFRlbXBvcmFyeSBkaXJlY3RvcnkgZm9yIHVwbG9hZDogJyR7dGVtcERpcn0nYCk7XG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIGZvcm0uYXBwZW5kKCdmaWxlJywgZnMuY3JlYXRlUmVhZFN0cmVhbShgJHt0ZW1wRGlyfS9hcHBpdW0uemlwYCkpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIHVybDogYGh0dHBzOi8vc2F1Y2VsYWJzLmNvbS9yZXN0L3YxL3N0b3JhZ2UvJHtwcm9jZXNzLmVudi5TQVVDRV9VU0VSTkFNRX0vYXBwaXVtLnppcD9vdmVyd3JpdGU9dHJ1ZWAsXG4gICAgICBoZWFkZXJzOiBmb3JtLmdldEhlYWRlcnMoKSxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcm5hbWU6IHByb2Nlc3MuZW52LlNBVUNFX1VTRVJOQU1FLFxuICAgICAgICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuU0FVQ0VfQUNDRVNTX0tFWSxcbiAgICAgIH0sXG4gICAgICBkYXRhOiBmb3JtLFxuICAgIH07XG4gICAgY29uc3QgYm9keSA9IChhd2FpdCBheGlvcyhvcHRpb25zKSkuZGF0YTtcbiAgICAvLyB1c2VybmFtZSBzaG91bGQgbm90IGVuZCB1cCBpbiB0aGUgbG9nc1xuICAgIGJvZHkudXNlcm5hbWUgPSAnKicucmVwZWF0KChib2R5LnVzZXJuYW1lIHx8ICcnKS5sZW5ndGgpO1xuICAgIGxvZy5pbmZvKGBGaWxlIHVwbG9hZGVkOiAke0pTT04uc3RyaW5naWZ5KGJvZHkpfWApO1xuICB9KTtcblxuICBndWxwLnRhc2soJ3NhdWNlLXN0b3JhZ2UtdXBsb2FkJywgZ3VscC5zZXJpZXMoWydnaXRodWI6ZG93bmxvYWQnLCAnc2F1Y2VsYWJzOnVwbG9hZCddKSk7XG5cbiAgLyoqXG4gICAqIFRoaXMgdGFzayBpcyBtZWFudCB0byBiZSBiYWNrZ3JvdW5kZWQsIGFuZCBraWxsZWQgdXNpbmcgT1MgdG9vbHMsIHNvIGl0XG4gICAqIG5ldmVyIGZpbmlzaGVzLlxuICAgKiAgICQgJChucG0gYmluKS9ndWxwIHBlcmlvZGljLW91dHB1dCAmXG4gICAqICAgWzFdIDM4MDYwXG4gICAqICAgWzA4OjU2OjUzXSBVc2luZyBndWxwZmlsZSB+L2NvZGUvYXBwaXVtLXhjdWl0ZXN0LWRyaXZlci9ndWxwZmlsZS5qc1xuICAgKiAgIFswODo1Njo1M10gU3RhcnRpbmcgJ3BlcmlvZGljLW91dHB1dCcuLi5cbiAgICogICAkIGtpbGwgMzgwNjBcbiAgICogICBbMV0gICsgMzgwNjAgdGVybWluYXRlZCAgJChucG0gYmluKS9ndWxwIHBlcmlvZGljLW91dHB1dFxuICAgKi9cbiAgZ3VscC50YXNrKCdwZXJpb2RpYy1vdXRwdXQnLCBmdW5jdGlvbiBwZXJpb2RpY091dHB1dCgpIHtcbiAgICBjb25zdCBpbnRlcnZhbCA9IG9wdHMuY2kuaW50ZXJ2YWwgfHwgT1VUUFVUX0lOVEVSVkFMO1xuICAgIHJldHVybiBuZXcgQihmdW5jdGlvbiB3cml0ZVRvU3Rkb3V0KCkge1xuICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gcHJpbnQoKSB7XG4gICAgICAgIHByb2Nlc3Muc3Rkb3V0LndyaXRlKCcuJyk7XG4gICAgICB9LCBpbnRlcnZhbCk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbmZpZ3VyZSxcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBRCxDQUFsQjs7QUFDQSxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUNBLE1BQU1FLEdBQUcsR0FBR0YsT0FBTyxDQUFDLFdBQUQsQ0FBbkI7O0FBQ0EsTUFBTTtFQUFDRyxJQUFJLEVBQUVDO0FBQVAsSUFBbUJKLE9BQU8sQ0FBQyxTQUFELENBQWhDOztBQUNBLE1BQU1LLEtBQUssR0FBR0wsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTU0sQ0FBQyxHQUFHTixPQUFPLENBQUMsVUFBRCxDQUFqQjs7QUFD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
