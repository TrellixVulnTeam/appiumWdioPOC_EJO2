"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fakeTime = fakeTime;

require("source-map-support/register");

function fakeTime(sandbox) {
  let clock = sandbox.useFakeTimers();
  return new TimeLord(clock);
}

class TimeLord {
  constructor(clock) {
    this.clock = clock;
  }

  speedup(interval, times) {
    let tick = n => {
      if (n === 0) return;
      process.nextTick(() => {
        this.clock.tick(interval);
        n--;
        tick(n);
      });
    };

    tick(times);
  }

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmYWtlVGltZSIsInNhbmRib3giLCJjbG9jayIsInVzZUZha2VUaW1lcnMiLCJUaW1lTG9yZCIsImNvbnN0cnVjdG9yIiwic3BlZWR1cCIsImludGVydmFsIiwidGltZXMiLCJ0aWNrIiwibiIsInByb2Nlc3MiLCJuZXh0VGljayJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi90aW1lLXV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGZha2VUaW1lKHNhbmRib3gpIHtcbiAgbGV0IGNsb2NrID0gc2FuZGJveC51c2VGYWtlVGltZXJzKCk7XG4gIHJldHVybiBuZXcgVGltZUxvcmQoY2xvY2spO1xufVxuXG5jbGFzcyBUaW1lTG9yZCB7XG4gIGNvbnN0cnVjdG9yKGNsb2NrKSB7XG4gICAgdGhpcy5jbG9jayA9IGNsb2NrO1xuICB9XG5cbiAgc3BlZWR1cChpbnRlcnZhbCwgdGltZXMpIHtcbiAgICBsZXQgdGljayA9IChuKSA9PiB7XG4gICAgICBpZiAobiA9PT0gMCkgcmV0dXJuOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG4gICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9jay50aWNrKGludGVydmFsKTtcbiAgICAgICAgbi0tO1xuICAgICAgICB0aWNrKG4pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB0aWNrKHRpbWVzKTtcbiAgfVxufVxuZXhwb3J0IHtmYWtlVGltZX07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLFNBQVNBLFFBQVQsQ0FBa0JDLE9BQWxCLEVBQTJCO0VBQ3pCLElBQUlDLEtBQUssR0FBR0QsT0FBTyxDQUFDRSxhQUFSLEVBQVo7RUFDQSxPQUFPLElBQUlDLFFBQUosQ0FBYUYsS0FBYixDQUFQO0FBQ0Q7O0FBRUQsTUFBTUUsUUFBTixDQUFlO0VBQ2JDLFdBQVcsQ0FBQ0gsS0FBRCxFQUFRO0lBQ2pCLEtBQUtBLEtBQUwsR0FBYUEsS0FBYjtFQUNEOztFQUVESSxPQUFPLENBQUNDLFFBQUQsRUFBV0MsS0FBWCxFQUFrQjtJQUN2QixJQUFJQyxJQUFJLEdBQUlDLENBQUQsSUFBTztNQUNoQixJQUFJQSxDQUFDLEtBQUssQ0FBVixFQUFhO01BQ2JDLE9BQU8sQ0FBQ0MsUUFBUixDQUFpQixNQUFNO1FBQ3JCLEtBQUtWLEtBQUwsQ0FBV08sSUFBWCxDQUFnQkYsUUFBaEI7UUFDQUcsQ0FBQztRQUNERCxJQUFJLENBQUNDLENBQUQsQ0FBSjtNQUNELENBSkQ7SUFLRCxDQVBEOztJQVFBRCxJQUFJLENBQUNELEtBQUQsQ0FBSjtFQUNEOztBQWZZIn0=