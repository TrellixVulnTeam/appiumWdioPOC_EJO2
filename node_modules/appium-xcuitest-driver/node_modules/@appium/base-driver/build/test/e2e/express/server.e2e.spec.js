"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

require("source-map-support/register");

var _lib = require("../../../lib");

var _axios = _interopRequireDefault(require("axios"));

var _sinon = require("sinon");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _lodash = _interopRequireDefault(require("lodash"));

var _helpers = require("../../helpers");

describe('server', function () {
  let hwServer;
  let port;
  let sandbox;
  before(async function () {
    port = await (0, _helpers.getTestPort)(true);

    function configureRoutes(app) {
      app.get('/', (req, res) => {
        res.header['content-type'] = 'text/html';
        res.status(200).send('Hello World!');
      });
      app.get('/python', (req, res) => {
        res.status(200).send(req.headers['content-type']);
      });
      app.get('/error', () => {
        throw new Error('hahaha');
      });
      app.get('/pause', async (req, res) => {
        res.header['content-type'] = 'text/html';
        await _bluebird.default.delay(1000);
        res.status(200).send('We have waited!');
      });
    }

    hwServer = await (0, _lib.server)({
      routeConfiguringFunction: configureRoutes,
      port
    });
  });
  beforeEach(function () {
    sandbox = (0, _sinon.createSandbox)();
    sandbox.stub(console, 'error');
  });
  after(async function () {
    await hwServer.close();
  });
  afterEach(function () {
    sandbox.restore();
  });
  it('should start up with our middleware', async function () {
    const {
      data
    } = await _axios.default.get(`http://${_helpers.TEST_HOST}:${port}/`);
    data.should.eql('Hello World!');
  });
  it('should fix broken context type', async function () {
    const {
      data
    } = await (0, _axios.default)({
      url: `http://${_helpers.TEST_HOST}:${port}/python`,
      headers: {
        'user-agent': 'Python',
        'content-type': 'application/x-www-form-urlencoded'
      }
    });
    data.should.eql('application/json; charset=utf-8');
  });
  it('should catch errors in the catchall', async function () {
    await _axios.default.get(`http://${_helpers.TEST_HOST}:${port}/error`).should.be.rejected;
  });
  it('should error if we try to start again on a port that is used', async function () {
    await (0, _lib.server)({
      routeConfiguringFunction() {},

      port
    }).should.be.rejectedWith(/EADDRINUSE/);
  });
  it('should not wait for the server close connections before finishing closing', async function () {
    let bodyPromise = _axios.default.get(`http://${_helpers.TEST_HOST}:${port}/pause`).catch(() => {});

    await _bluebird.default.delay(100);
    let before = Date.now();
    await hwServer.close();
    (Date.now() - before).should.not.be.above(800);
    await bodyPromise;
  });
  it('should error if we try to start on a bad hostname', async function () {
    this.timeout(60000);
    await (0, _lib.server)({
      routeConfiguringFunction: _lodash.default.noop,
      port,
      hostname: 'lolcathost'
    }).should.be.rejectedWith(/ENOTFOUND|EADDRNOTAVAIL|EAI_AGAIN/);
    await (0, _lib.server)({
      routeConfiguringFunction: _lodash.default.noop,
      port,
      hostname: '1.1.1.1'
    }).should.be.rejectedWith(/EADDRNOTAVAIL/);
  });
});
describe('server plugins', function () {
  let hwServer;
  let port;
  before(async function () {
    port = await (0, _helpers.getTestPort)(true);
  });
  afterEach(async function () {
    try {
      await hwServer.close();
    } catch (ign) {}
  });

  function updaterWithGetRoute(route, reply) {
    return async (app, httpServer) => {
      app.get(`/${route}`, (req, res) => {
        res.header['content-type'] = 'text/html';
        res.status(200).send(reply);
      });
      httpServer[`_updated_${route}`] = true;
    };
  }

  it('should allow one or more plugins to update the server', async function () {
    hwServer = await (0, _lib.server)({
      routeConfiguringFunction: _lodash.default.noop,
      port,
      serverUpdaters: [updaterWithGetRoute('plugin1', 'res from plugin1 route'), updaterWithGetRoute('plugin2', 'res from plugin2 route')]
    });
    let {
      data
    } = await _axios.default.get(`http://${_helpers.TEST_HOST}:${port}/plugin1`);
    data.should.eql('res from plugin1 route');
    ({
      data
    } = await _axios.default.get(`http://${_helpers.TEST_HOST}:${port}/plugin2`));
    data.should.eql('res from plugin2 route');
    hwServer._updated_plugin1.should.be.true;
    hwServer._updated_plugin2.should.be.true;
  });
  it('should pass on errors from the plugin updateServer method', async function () {
    await (0, _lib.server)({
      routeConfiguringFunction: _lodash.default.noop,
      port,
      serverUpdaters: [() => {
        throw new Error('ugh');
      }]
    }).should.eventually.be.rejectedWith(/ugh/);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsImh3U2VydmVyIiwicG9ydCIsInNhbmRib3giLCJiZWZvcmUiLCJnZXRUZXN0UG9ydCIsImNvbmZpZ3VyZVJvdXRlcyIsImFwcCIsImdldCIsInJlcSIsInJlcyIsImhlYWRlciIsInN0YXR1cyIsInNlbmQiLCJoZWFkZXJzIiwiRXJyb3IiLCJCIiwiZGVsYXkiLCJzZXJ2ZXIiLCJyb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24iLCJiZWZvcmVFYWNoIiwiY3JlYXRlU2FuZGJveCIsInN0dWIiLCJjb25zb2xlIiwiYWZ0ZXIiLCJjbG9zZSIsImFmdGVyRWFjaCIsInJlc3RvcmUiLCJpdCIsImRhdGEiLCJheGlvcyIsIlRFU1RfSE9TVCIsInNob3VsZCIsImVxbCIsInVybCIsImJlIiwicmVqZWN0ZWQiLCJyZWplY3RlZFdpdGgiLCJib2R5UHJvbWlzZSIsImNhdGNoIiwiRGF0ZSIsIm5vdyIsIm5vdCIsImFib3ZlIiwidGltZW91dCIsIl8iLCJub29wIiwiaG9zdG5hbWUiLCJpZ24iLCJ1cGRhdGVyV2l0aEdldFJvdXRlIiwicm91dGUiLCJyZXBseSIsImh0dHBTZXJ2ZXIiLCJzZXJ2ZXJVcGRhdGVycyIsIl91cGRhdGVkX3BsdWdpbjEiLCJ0cnVlIiwiX3VwZGF0ZWRfcGx1Z2luMiIsImV2ZW50dWFsbHkiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi90ZXN0L2UyZS9leHByZXNzL3NlcnZlci5lMmUuc3BlYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0cmFuc3BpbGU6bW9jaGFcblxuaW1wb3J0IHtzZXJ2ZXJ9IGZyb20gJy4uLy4uLy4uL2xpYic7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IHtjcmVhdGVTYW5kYm94fSBmcm9tICdzaW5vbic7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtURVNUX0hPU1QsIGdldFRlc3RQb3J0fSBmcm9tICcuLi8uLi9oZWxwZXJzJztcblxuZGVzY3JpYmUoJ3NlcnZlcicsIGZ1bmN0aW9uICgpIHtcbiAgbGV0IGh3U2VydmVyO1xuICBsZXQgcG9ydDtcbiAgbGV0IHNhbmRib3g7XG4gIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgcG9ydCA9IGF3YWl0IGdldFRlc3RQb3J0KHRydWUpO1xuXG4gICAgZnVuY3Rpb24gY29uZmlndXJlUm91dGVzKGFwcCkge1xuICAgICAgYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xuICAgICAgICByZXMuaGVhZGVyWydjb250ZW50LXR5cGUnXSA9ICd0ZXh0L2h0bWwnO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCgnSGVsbG8gV29ybGQhJyk7XG4gICAgICB9KTtcbiAgICAgIGFwcC5nZXQoJy9weXRob24nLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocmVxLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKTtcbiAgICAgIH0pO1xuICAgICAgYXBwLmdldCgnL2Vycm9yJywgKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2hhaGFoYScpO1xuICAgICAgfSk7XG4gICAgICBhcHAuZ2V0KCcvcGF1c2UnLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLmhlYWRlclsnY29udGVudC10eXBlJ10gPSAndGV4dC9odG1sJztcbiAgICAgICAgYXdhaXQgQi5kZWxheSgxMDAwKTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoJ1dlIGhhdmUgd2FpdGVkIScpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGh3U2VydmVyID0gYXdhaXQgc2VydmVyKHtcbiAgICAgIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbjogY29uZmlndXJlUm91dGVzLFxuICAgICAgcG9ydCxcbiAgICB9KTtcbiAgfSk7XG4gIGJlZm9yZUVhY2goZnVuY3Rpb24gKCkge1xuICAgIHNhbmRib3ggPSBjcmVhdGVTYW5kYm94KCk7XG4gICAgc2FuZGJveC5zdHViKGNvbnNvbGUsICdlcnJvcicpO1xuICB9KTtcbiAgYWZ0ZXIoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGF3YWl0IGh3U2VydmVyLmNsb3NlKCk7XG4gIH0pO1xuICBhZnRlckVhY2goZnVuY3Rpb24gKCkge1xuICAgIHNhbmRib3gucmVzdG9yZSgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHN0YXJ0IHVwIHdpdGggb3VyIG1pZGRsZXdhcmUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3MuZ2V0KGBodHRwOi8vJHtURVNUX0hPU1R9OiR7cG9ydH0vYCk7XG4gICAgZGF0YS5zaG91bGQuZXFsKCdIZWxsbyBXb3JsZCEnKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZml4IGJyb2tlbiBjb250ZXh0IHR5cGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgYXhpb3Moe1xuICAgICAgdXJsOiBgaHR0cDovLyR7VEVTVF9IT1NUfToke3BvcnR9L3B5dGhvbmAsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICd1c2VyLWFnZW50JzogJ1B5dGhvbicsXG4gICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgZGF0YS5zaG91bGQuZXFsKCdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04Jyk7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGNhdGNoIGVycm9ycyBpbiB0aGUgY2F0Y2hhbGwnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgYXdhaXQgYXhpb3MuZ2V0KGBodHRwOi8vJHtURVNUX0hPU1R9OiR7cG9ydH0vZXJyb3JgKS5zaG91bGQuYmUucmVqZWN0ZWQ7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGVycm9yIGlmIHdlIHRyeSB0byBzdGFydCBhZ2FpbiBvbiBhIHBvcnQgdGhhdCBpcyB1c2VkJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGF3YWl0IHNlcnZlcih7XG4gICAgICByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb24oKSB7fSxcbiAgICAgIHBvcnQsXG4gICAgfSkuc2hvdWxkLmJlLnJlamVjdGVkV2l0aCgvRUFERFJJTlVTRS8pO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBub3Qgd2FpdCBmb3IgdGhlIHNlcnZlciBjbG9zZSBjb25uZWN0aW9ucyBiZWZvcmUgZmluaXNoaW5nIGNsb3NpbmcnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IGJvZHlQcm9taXNlID0gYXhpb3MuZ2V0KGBodHRwOi8vJHtURVNUX0hPU1R9OiR7cG9ydH0vcGF1c2VgKS5jYXRjaCgoKSA9PiB7fSk7XG5cbiAgICAvLyByZWxpbnF1aXNoIGNvbnRyb2wgc28gdGhhdCB3ZSBkb24ndCBjbG9zZSBiZWZvcmUgdGhlIHJlcXVlc3QgaXMgcmVjZWl2ZWRcbiAgICBhd2FpdCBCLmRlbGF5KDEwMCk7XG5cbiAgICBsZXQgYmVmb3JlID0gRGF0ZS5ub3coKTtcbiAgICBhd2FpdCBod1NlcnZlci5jbG9zZSgpO1xuICAgIC8vIGV4cGVjdCBzbGlnaHRseSBsZXNzIHRoYW4gdGhlIHJlcXVlc3Qgd2FpdGVkLCBzaW5jZSB3ZSBwYXVzZWQgYWJvdmVcbiAgICAoRGF0ZS5ub3coKSAtIGJlZm9yZSkuc2hvdWxkLm5vdC5iZS5hYm92ZSg4MDApO1xuXG4gICAgYXdhaXQgYm9keVByb21pc2U7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGVycm9yIGlmIHdlIHRyeSB0byBzdGFydCBvbiBhIGJhZCBob3N0bmFtZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRpbWVvdXQoNjAwMDApO1xuICAgIGF3YWl0IHNlcnZlcih7XG4gICAgICByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb246IF8ubm9vcCxcbiAgICAgIHBvcnQsXG4gICAgICBob3N0bmFtZTogJ2xvbGNhdGhvc3QnLFxuICAgIH0pLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL0VOT1RGT1VORHxFQUREUk5PVEFWQUlMfEVBSV9BR0FJTi8pO1xuICAgIGF3YWl0IHNlcnZlcih7XG4gICAgICByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb246IF8ubm9vcCxcbiAgICAgIHBvcnQsXG4gICAgICBob3N0bmFtZTogJzEuMS4xLjEnLFxuICAgIH0pLnNob3VsZC5iZS5yZWplY3RlZFdpdGgoL0VBRERSTk9UQVZBSUwvKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ3NlcnZlciBwbHVnaW5zJywgZnVuY3Rpb24gKCkge1xuICBsZXQgaHdTZXJ2ZXI7XG4gIGxldCBwb3J0O1xuXG4gIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgcG9ydCA9IGF3YWl0IGdldFRlc3RQb3J0KHRydWUpO1xuICB9KTtcblxuICBhZnRlckVhY2goYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBod1NlcnZlci5jbG9zZSgpO1xuICAgIH0gY2F0Y2ggKGlnbikge31cbiAgfSk7XG5cbiAgZnVuY3Rpb24gdXBkYXRlcldpdGhHZXRSb3V0ZShyb3V0ZSwgcmVwbHkpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS1hd2FpdFxuICAgIHJldHVybiBhc3luYyAoYXBwLCBodHRwU2VydmVyKSA9PiB7XG4gICAgICBhcHAuZ2V0KGAvJHtyb3V0ZX1gLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgcmVzLmhlYWRlclsnY29udGVudC10eXBlJ10gPSAndGV4dC9odG1sJztcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocmVwbHkpO1xuICAgICAgfSk7XG4gICAgICBodHRwU2VydmVyW2BfdXBkYXRlZF8ke3JvdXRlfWBdID0gdHJ1ZTtcbiAgICB9O1xuICB9XG5cbiAgaXQoJ3Nob3VsZCBhbGxvdyBvbmUgb3IgbW9yZSBwbHVnaW5zIHRvIHVwZGF0ZSB0aGUgc2VydmVyJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGh3U2VydmVyID0gYXdhaXQgc2VydmVyKHtcbiAgICAgIHJvdXRlQ29uZmlndXJpbmdGdW5jdGlvbjogXy5ub29wLFxuICAgICAgcG9ydCxcbiAgICAgIHNlcnZlclVwZGF0ZXJzOiBbXG4gICAgICAgIHVwZGF0ZXJXaXRoR2V0Um91dGUoJ3BsdWdpbjEnLCAncmVzIGZyb20gcGx1Z2luMSByb3V0ZScpLFxuICAgICAgICB1cGRhdGVyV2l0aEdldFJvdXRlKCdwbHVnaW4yJywgJ3JlcyBmcm9tIHBsdWdpbjIgcm91dGUnKSxcbiAgICAgIF0sXG4gICAgfSk7XG4gICAgbGV0IHtkYXRhfSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cDovLyR7VEVTVF9IT1NUfToke3BvcnR9L3BsdWdpbjFgKTtcbiAgICBkYXRhLnNob3VsZC5lcWwoJ3JlcyBmcm9tIHBsdWdpbjEgcm91dGUnKTtcbiAgICAoe2RhdGF9ID0gYXdhaXQgYXhpb3MuZ2V0KGBodHRwOi8vJHtURVNUX0hPU1R9OiR7cG9ydH0vcGx1Z2luMmApKTtcbiAgICBkYXRhLnNob3VsZC5lcWwoJ3JlcyBmcm9tIHBsdWdpbjIgcm91dGUnKTtcbiAgICBod1NlcnZlci5fdXBkYXRlZF9wbHVnaW4xLnNob3VsZC5iZS50cnVlO1xuICAgIGh3U2VydmVyLl91cGRhdGVkX3BsdWdpbjIuc2hvdWxkLmJlLnRydWU7XG4gIH0pO1xuICBpdCgnc2hvdWxkIHBhc3Mgb24gZXJyb3JzIGZyb20gdGhlIHBsdWdpbiB1cGRhdGVTZXJ2ZXIgbWV0aG9kJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGF3YWl0IHNlcnZlcih7XG4gICAgICByb3V0ZUNvbmZpZ3VyaW5nRnVuY3Rpb246IF8ubm9vcCxcbiAgICAgIHBvcnQsXG4gICAgICBzZXJ2ZXJVcGRhdGVyczogW1xuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1Z2gnKTtcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSkuc2hvdWxkLmV2ZW50dWFsbHkuYmUucmVq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